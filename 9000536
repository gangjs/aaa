importPackage(java.lang);
importPackage(java.sql);
importPackage(Packages.database);

var books1_1 = [];
var books2_1 = [];
var books3_1 = [];
var booss1_1 = [];
var books1 = [//아이템코드 , 갯수 스텟, 공, 마
    [4000016, 200, 15, 0, 0], // 빨달껍
    [4000037, 200, 15, 0, 0], //버블링
    [4000009, 200, 15, 0, 0], //파버섯갓
    [4000007, 200, 15, 0, 0], //이블아이
    [4000351, 200, 15, 0, 0], //전강의 독침
    [4000115, 200, 15, 0, 0], //톱니바퀴
    [4000169, 200, 15, 0, 0], //절구공이
    [4000172, 200, 15, 0, 0], //삼미호의 꼬
    [4000027, 200, 15, 0, 0], //와일드카고 눈동자
    [4000363, 200, 15, 0, 0], //출입증
    /////10~70//////
    [4000236, 400, 15, 0, 0], //비틀의 뿔
    [4000261, 400, 15, 0, 0], //핀 호브 부적
    [4000074, 400, 15, 0, 0], //루이넬의 꼬리
    [4000133, 400, 15, 0, 0], //듀얼 파이렛의 추진기
    [4000242, 400, 15, 0, 0], //듀얼 버크의 작은 꼬리
    [4000134, 400, 15, 0, 0], //바이킹의 돛
    [4000268, 400, 15, 0, 0], //와이번의 날개
    [4000265, 400, 15, 0, 0], //이상한 알
    [4000448, 400, 15, 0, 0], //녹색 심장
    [4000180, 400, 15, 0, 0], //상어 틀니
    //공 10 //공20 //6
    //////70~100/////
    [4000267, 600, 15, 0, 0], //해골 어깨 보호대
    [4000272, 600, 15, 0, 0], //알껍질 조각
    [4000273, 600, 15, 0, 0], //오래된 뼈
    [4000625, 600, 15, 0, 0], //크로키의 투구
    [4000626, 600, 15, 0, 0], //레인디어 창
    [4000627, 600, 15, 0, 0], //베어울프의 모닝스타
    [4000628, 600, 15, 0, 0], //벌쳐의 어깨장식
    [4000629, 600, 15, 0, 0], //캐슬골렘의 벽돌
    [4000453, 600, 15, 0, 0], //푸른 심장
    [4000458, 600, 15, 0, 0], //붉은 심장
    //////100~140/////
    [4310009, 50, 15, 0, 0], //노블메달
    [4310010, 20, 15, 0, 0], //노블메달
    [4021010, 10, 15, 0, 0], //노블메달
    [4250000, 50, 15, 0, 0], //하급다이아
    [4250100, 50, 15, 0, 0], //하급사파이어
    [4250200, 50, 15, 0, 0], //하급가넷
    [4250800, 50, 15, 0, 0], //하급힘크
    [4250900, 50, 15, 0, 0], //하급지크
    [4251000, 50, 15, 0, 0], //하급행크
    [4251100, 50, 15, 0, 0], //하급민크
    [4251400, 50, 15, 0, 0], //하급어크
    [4250301, 50, 15, 0, 0], //중급 오팔
    [4250501, 50, 15, 0, 0], //중급 아쿠아마린
    [4251301, 50, 15, 0, 0],//중급 흑수정
    [4004000, 80, 15, 0, 0],//힘크원
    [4004001, 80, 15, 0, 0],//지크원
    [4004002, 80, 15, 0, 0],//민크원
    [4004003, 80, 15, 0, 0],//행크원
    [4004004, 80, 15, 0, 0],//어크원
    [4250801, 30, 15, 0, 0],//중급힘크
    [4250901, 30, 15, 0, 0],//중급지크
    [4251101, 30, 15, 0, 0],//중급민크
    [4251001, 30, 15, 0, 0],//중급행크
    [4251401, 30, 15, 0, 0],//중급어크
    [4250001, 30, 15, 0, 0],//중급다야
    [4250201, 30, 15, 0, 0],//중급가넷
    [4250101, 30, 15, 0, 0],//중급사파
    [4250701, 30, 15, 0, 0],//중급에메
    [4250401, 30, 15, 0, 0],//중급자수정
    [4250601, 15, 15, 0, 0],//중급토파

    [4250902, 15, 15, 0, 0],//상급 힘
    [4251102, 15, 15, 0, 0],//
    [4250802, 15, 15, 0, 0],//
    [4251002, 15, 15, 0, 0],//
    [4251402, 15, 15, 0, 0],//상급

    [4007000, 30, 15, 0, 0],//가루
    [4007001, 30, 15, 0, 0],//
    [4007002, 30, 15, 0, 0],//
    [4007003, 30, 15, 0, 0],//
    [4007004, 30, 15, 0, 0],//
    [4007005, 30, 15, 0, 0],//
    [4007006, 30, 15, 0, 0],//
    [4007007, 30, 15, 0, 0],//가루
    [4260006, 300, 15, 0, 0],//결정
    [4260007, 300, 15, 0, 0],//
    [4260008, 300, 15, 0, 0],//결정
    [4020009, 150, 15, 0, 0],//시조
    [4020013, 100, 15, 0, 0],//꿈조
    [4001858, 1, 15, 0, 0],//청나라 옥주전자
    [4009376, 30, 15, 0, 0],
    [4009375, 30, 15, 0, 0],
    [4310177, 20, 15, 0, 0],
    [2433928, 50, 15, 0, 0],
    [4001126, 1000, 30, 0, 0],
    [4000826, 3000, 30, 0, 0],//
    [4000827, 3000, 30, 0, 0],//
    [4000828, 3000, 30, 0, 0],//
    [4000829, 3000, 30, 0, 0],//
    [4000830, 3000, 30, 0, 0],//
    [4000831, 3000, 30, 0, 0],//
    [4000832, 3000, 30, 0, 0],//
    [4000833, 3000, 30, 0, 0],//
    [4000834, 3000, 30, 0, 0],//
    [4000835, 3000, 30, 0, 0],//
    [4000836, 3000, 30, 0, 0],//
    [4033729, 50, 30, 0, 0],//

    [4009367, 4000, 30, 0, 0],//
    [4009368, 4000, 30, 0, 0],//
    [4009369, 4000, 30, 0, 0],//
    [4009370, 4000, 30, 0, 0],//
    [4009371, 4000, 30, 0, 0],//
    [4009372, 4000, 30, 0, 0],//
    [4009373, 4000, 30, 0, 0],//
    [4009374, 200, 30, 0, 0],//

    [4000642, 5000, 30, 0, 0],
    [4000643, 5000, 30, 0, 0],
    [4000644, 5000, 30, 0, 0],
    [4000645, 5000, 30, 0, 0],
    [4000646, 5000, 30, 0, 0],
    [4000647, 5000, 30, 0, 0],
    [4000648, 5000, 30, 0, 0],
    [4000649, 5000, 30, 0, 0],
    [4000650, 5000, 30, 0, 0],
    [4000651, 5000, 30, 0, 0],
    [4000652, 5000, 30, 0, 0],
    [4000653, 5000, 30, 0, 0],
    [4000654, 5000, 30, 0, 0],
    [4000655, 5000, 30, 0, 0],
    [4000656, 5000, 30, 0, 0],
    [4000657, 5000, 30, 0, 0],
    [4000658, 5000, 30, 0, 0],
    [4000659, 1, 30, 0, 0],
    //아래부터 마스테리아
    [4000837, 8000, 30, 0, 0],
    [4000838, 8000, 30, 0, 0],
    [4000391, 8000, 30, 0, 0],
    [4031937, 8000, 30, 0, 0],
    [4000900, 8000, 30, 0, 0],
    [4000839, 8000, 30, 0, 0],
    [4032024, 8000, 30, 0, 0],
    [4032025, 8000, 30, 0, 0],
    [4000894, 8000, 30, 0, 0],
	// 소멸의 여로
	[4034922, 8000, 30, 0, 0],
	[4034923, 8000, 30, 0, 0],
	[4034924, 8000, 30, 0, 0],
	[4034925, 8000, 30, 0, 0],
	[4034926, 8000, 30, 0, 0],
	[4034927, 8000, 30, 0, 0],
	[4034928, 8000, 30, 0, 0],
	//츄츄
	[4034942, 8000, 30, 0, 0],
	[4034943, 8000, 30, 0, 0],
	[4034944, 8000, 30, 0, 0],
	[4034945, 8000, 30, 0, 0],
	[4034946, 8000, 30, 0, 0],
	[4034947, 8000, 30, 0, 0],
	[4034948, 8000, 30, 0, 0],
	[4034949, 8000, 30, 0, 0],
	[4034950, 8000, 30, 0, 0],
	[4034951, 8000, 30, 0, 0],
	[4034952, 8000, 30, 0, 0],
	[4034953, 8000, 30, 0, 0],
	[4034954, 8000, 30, 0, 0],
	[4034955, 8000, 30, 0, 0],
	[4034956, 8000, 30, 0, 0],
	[4034957, 8000, 30, 0, 0],
	[4034979, 8000, 30, 0, 0],
	[4034980, 8000, 30, 0, 0],
	[4034981, 8000, 30, 0, 0],
	[4034982, 8000, 30, 0, 0],
	[4034983, 9999, 30, 0, 0],
	// 아르카나
	[4036096, 8000, 30, 0, 0],
	[4036097, 8000, 30, 0, 0],
    [4036098, 8000, 30, 0, 0],
	[4036099, 8000, 30, 0, 0],
	[4036100, 8000, 30, 0, 0],
];

var books2 = [//아이템코드 , 갯수 스텟, 공, 마
    [1003451, 1, 10, 0, 0],
    [1052165, 1, 10, 0, 0],
    [1142263, 1, 10, 0, 0],
    [1132088, 1, 10, 0, 0],
    [1122109, 1, 10, 0, 0],
    [1032099, 1, 10, 0, 0],
    //////뉴비 세트
    [1003159, 1, 10, 0, 0],
    [1052304, 1, 10, 0, 0],
    [1072476, 1, 10, 0, 0],
    [1082290, 1, 10, 0, 0],
    [1142257, 1, 10, 0, 0],
    //쓸만한 여제 세트
    [1003242, 1, 15, 0, 0],
    [1052357, 1, 15, 0, 0],
    [1072521, 1, 15, 0, 0],
    [1082314, 1, 15, 0, 0],
    [1102294, 1, 15, 0, 0],
    [1152060, 1, 15, 0, 0],
    [1132092, 1, 15, 0, 0],
    //메이플 베릴
    [1003243, 1, 10, 0, 0],
    [1052358, 1, 10, 0, 0],
    [1072522, 1, 10, 0, 0],
    [1082315, 1, 10, 0, 0],
    [1102295, 1, 10, 0, 0],
    [1152061, 1, 10, 0, 0],
    [1132093, 1, 10, 0, 0],
    //메이플 래티넘
    [1112664, 1, 10, 0, 0],
    [1112665, 1, 10, 0, 0],
    [1082401, 1, 10, 0, 0],
    [1072618, 1, 10, 0, 0],
    [1152074, 1, 10, 0, 0],
    [1122174, 1, 10, 0, 0],
    [1062148, 1, 10, 0, 0],
    [1032121, 1, 10, 0, 0],
    [1042231, 1, 10, 0, 0],
    [1112681, 1, 10, 0, 0],
    //운동회 세트
    [1002357, 1, 15, 0, 0],
    [1122000, 1, 15, 0, 0],
    [1032241, 1, 15, 0, 0],
    [1012478, 1, 15, 0, 0],
    [1022231, 1, 15, 0, 0],
    //원정대 보스 노말
    [1003112, 1, 15, 0, 0],
    [1122076, 1, 15, 0, 0],
    [1113149, 1, 15, 0, 0],
    [1132296, 1, 15, 0, 0],
    [1102871, 1, 15, 0, 0],
    //원정대 보스 카오스
    [1113078, 1, 20, 0, 0],
    [1012438, 1, 20, 0, 0],
    [1032062, 1, 20, 0, 0],
    [1113070, 1, 20, 0, 0],
    //드래곤 라이더 악세서리 세트
    //퀘스트 컬렉션 시작
    [1142188, 1, 40, 0, 0],
    [1142551, 1, 40, 0, 0],
    [1142979, 1, 40, 0, 0],
    [1112683, 1, 40, 0, 0],
    [1002006, 1, 40, 0, 0],
    [1302015, 1, 40, 0, 0],
    [1322031, 1, 40, 0, 0],
    [1102053, 1, 40, 0, 0],
    [1322033, 1, 40, 0, 0],
    [1002441, 1, 40, 0, 0],
    [1032025, 1, 40, 0, 0],
    [1002436, 1, 40, 0, 0],
    [1102061, 1, 40, 0, 0],
    [1102048, 1, 40, 0, 0],
    [1022115, 1, 20, 0, 0],
    [1102057, 1, 40, 0, 0],
    [1022114, 1, 20, 0, 0],
    [1032075, 1, 40, 0, 0],
    [1072275, 1, 20, 0, 0],
    [1122013, 1, 40, 0, 0],
    [1102135, 1, 40, 0, 0],
    [1003068, 1, 20, 0, 0],
    [1002972, 1, 50, 0, 0],
    [3010008, 1, 50, 0, 0],
    /////////////////////////////
    [5010801, 1, 30, 0, 0],
    [5010802, 1, 40, 0, 0],
    [5010809, 1, 60, 0, 0],
    [5010825, 1, 100, 0, 0],
    [5010834, 1, 500, 0, 0],
    //퀘스트 컬렉션 끝
    [1003976, 1, 20, 0, 0],
    [1052669, 1, 20, 0, 0],
    [1082556, 1, 20, 0, 0],
    [1109999, 1, 20, 0, 0],
    [1072870, 1, 20, 0, 0],
    [1003946, 1, 40, 0, 0],
    [1052647, 1, 40, 0, 0],
    [1102612, 1, 40, 0, 0],
    [1072853, 1, 40, 0, 0],
    [1082540, 1, 40, 0, 0],
    [1113055, 1, 40, 0, 0],
    [1032200, 1, 40, 0, 0],
    [1132242, 1, 40, 0, 0],
    [1152154, 1, 40, 0, 0],
    [1122262, 1, 40, 0, 0],
    [2433927, 1, 40, 0, 0],
    [1012239, 1, 80, 0, 0],
    [1032093, 1, 80, 0, 0],
    [1112584, 1, 80, 0, 0],
    [1122104, 1, 80, 0, 0],
    [1132085, 1, 80, 0, 0],
];

var books3 = [//아이템코드 , 갯수 스텟, 공, 마
    [3980700, 1000, 6, 0, 0],
    [3980701, 1000, 6, 0, 0],
    [3980702, 1000, 6, 0, 0],
    [3980703, 1000, 6, 0, 0],
    [3980704, 1000, 6, 0, 0],
    [3980705, 1000, 6, 0, 0],
    [3980706, 1000, 6, 0, 0],
    [4004000, 100, 6, 0, 0],
    [4004001, 100, 6, 0, 0],
    [4004002, 100, 6, 0, 0],
    [4004003, 100, 6, 0, 0],
    [4004004, 100, 6, 0, 0],
    [4250801, 30,  6, 0, 0],
    [4250901, 30,  6, 0, 0],
    [4251101, 30,  6, 0, 0],
    [4251001, 30,  6, 0, 0],
    [4251401, 30,  6, 0, 0],
    [4250001, 30,  6, 0, 0],
    [4250201, 30,  6, 0, 0],
    [4250101, 30,  6, 0, 0],
    [4250701, 30,  6, 0, 0],
    [4250401, 30,  6, 0, 0],
    [4250601, 30,  6, 0, 0],
    [4007000, 60,  6, 0, 0],
    [4007001, 60,  6, 0, 0],
    [4007002, 60,  6, 0, 0],
    [4007003, 60,  6, 0, 0],
    [4007004, 60,  6, 0, 0],
    [4007005, 60,  6, 0, 0],
    [4007006, 60,  6, 0, 0],
    [4007007, 60,  6, 0, 0],
    [4260006, 600, 6, 0, 0],
    [4260007, 600, 6, 0, 0],
    [4260008, 600, 6, 0, 0],
    [4020009, 200, 6, 0, 0],
    [4020009, 400, 6, 0, 0],
    [4020009, 600, 6, 0, 0]
     
];

var booss1 = [
    [2220000, 20, 30, 0, 0],
    [3220000, 20, 30, 0, 0],
    [3220001, 20, 30, 0, 0],
    [4220000, 20, 30, 0, 0],
    [5220002, 20, 30, 0, 0],
    [5220000, 20, 30, 0, 0],
    [5220003, 20, 30, 0, 0],
    [6220000, 20, 30, 0, 0],
    [6220001, 20, 30, 0, 0],
    [7220001, 20, 30, 0, 0],
    [7220000, 20, 30, 0, 0],
    [7220002, 20, 30, 0, 0],
    [8800102, 20, 30, 0, 0],
    [8810122, 20, 30, 0, 0],
    [8300007, 20, 30, 0, 0],
];
//#fUI/UIWindow.img/Quest/notice/1#

//밑에 함수들 너무 복잡해서 여따가 작업 좀 할게용
var transferItem = [2432000, 20]; //필요 아이템 코드, 갯수
function transferMyData(transferUserID) {
    var transferVal1 = String(), initializeVal1 = String();
    for (var i = 0; i < books1_1.length; i++) {
        transferVal1 += books1_1[i] + ",";
        initializeVal1 += "0,";
    }
    var transferVal2 = String(), initializeVal2 = String();
    for (var i = 0; i < books2_1.length; i++) {
        transferVal2 += books2_1[i] + ",";
        initializeVal2 += "0,";
    }
    var transferVal3 = String(), initializeVal3 = String();
    for (var i = 0; i < books3_1.length; i++) {
        transferVal3 += books3_1[i] + ",";
        initializeVal3 += "0,";
    }
    var transferVal4 = String(), initializeVal4 = String();
    for (var i = 0; i < booss1_1.length; i++) {
        transferVal4 += booss1_1[i] + ",";
        initializeVal4 += "0,";
    }

    transferDataUpdate(transferUserID, transferVal1, "books1");
    transferDataUpdate(transferUserID, transferVal2, "books2");
    transferDataUpdate(transferUserID, transferVal3, "books3");
    transferDataUpdate(transferUserID, transferVal4, "booss1");

    //해당 캐릭터 초기화
    cm.getPlayer().setKeyValue("books1", initializeVal1, true);
    cm.getPlayer().setKeyValue("books2", initializeVal2, true);
    cm.getPlayer().setKeyValue("books3", initializeVal3, true);
    cm.getPlayer().setKeyValue("booss1", initializeVal4, true);
}

// 올컬렉
var perfectItem = [2432000, 3000]; //필요 아이템 코드, 갯수
function perfectMyData() {
    var perfectVal1 = "";
    for (var i = 0; i < books1_1.length; i++) {
        perfectVal1 += books1[i][2] + ",";
    }
    var perfectVal2 = "";
    for (var i = 0; i < books2_1.length; i++) {
        perfectVal2 += books2[i][2] + ",";
    }
    var perfectVal4 = "";
    for (var i = 0; i < booss1_1.length; i++) {
        perfectVal4 += booss1[i][2] + ",";
    }

	cm.getPlayer().setKeyValue("books1", perfectVal1, true);//기타 수집
	cm.getPlayer().setKeyValue("books2", perfectVal2, true);//장비 수집
	cm.getPlayer().setKeyValue("booss1", perfectVal4, true);//보스 수집	
}

function containsData(userID, key) {
    var contains = false;
    var con = null, ps = null, rs = null;
    try {
        con = DatabaseConnection.getConnection();
        ps = con.prepareStatement("SELECT * FROM customvalues WHERE `cid` = ? AND `key` = ?");
        ps.setInt(1, userID);
        ps.setString(2, key);
        rs = ps.executeQuery();

        contains = rs.next();

        rs.close();
        ps.close();
        con.close();
    } catch (e) {

    } finally {
        if (rs != null) {
            try {
                rs.close();
            } catch (e) {

            }
        }
        if (ps != null) {
            try {
                ps.close();
            } catch (e) {
                
            }
        }
        if (con != null) {
            try {
                con.close();
            } catch (e) {
                
            }
        }
    }
    return contains;
}

function transferDataUpdate(userID, val, key) {
    var con = null, ps = null;
    try {
        var contains = containsData(userID, key);

        con = DatabaseConnection.getConnection();

        if (contains) {
            ps = con.prepareStatement("UPDATE customvalues SET `value` = ? WHERE `cid` = ? AND `key` = ?");
            ps.setString(1, val);
            ps.setInt(2, userID);
            ps.setString(3, key);
            ps.executeUpdate();
        } else {
            ps = con.prepareStatement("INSERT INTO customvalues (`cid`, `key`, `value`) VALUES (?, ?, ?)");
            ps.setInt(1, userID);
            ps.setString(2, key);
            ps.setString(3, val);
            ps.executeUpdate();
        }

        ps.close();
        con.close();
    } catch (e) {

    } finally {
        if (ps != null) {
            try {
                ps.close();
            } catch (e) {
                
            }
        }
        if (con != null) {
            try {
                con.close();
            } catch (e) {
                
            }
        }
    }
}

var users;
function getMyCharacters() {
    var myCharacters = new Array();

    var userID = cm.getPlayer().getId();
    var accID = cm.getPlayer().getAccountID();

    var con = null, ps = null, rs = null;
    try {
        con = DatabaseConnection.getConnection();
        ps = con.prepareStatement("SELECT * FROM characters WHERE `id` != ? AND `accountid` = ?");
        ps.setInt(1, userID);
        ps.setInt(2, accID);
        rs = ps.executeQuery();

        while (rs.next()) {
            var rsUserID = rs.getInt("id");
            var rsUserName = rs.getString("name");
            myCharacters.push([rsUserID, rsUserName]);
        }
        rs.close();
        ps.close();
        con.close();
    } catch (e) {

    } finally {
        if (rs != null) {
            try {
                rs.close();
            } catch (e) {

            }
        }
        if (ps != null) {
            try {
                ps.close();
            } catch (e) {
                
            }
        }
        if (con != null) {
            try {
                con.close();
            } catch (e) {
                
            }
        }
    }
    return myCharacters;
}

function enableTransfer() {
    for (var i = 0; i < books1_1.length; i++) {
        if (parseInt(books1_1[i]) > 0) {
            return true;
        }
    }
    for (var i = 0; i < books2_1.length; i++) {
        if (parseInt(books2_1[i]) > 0) {
            return true;
        }
    }
    for (var i = 0; i < books3_1.length; i++) {
        if (parseInt(books3_1[i]) > 0) {
            return true;
        }
    }
    for (var i = 0; i < booss1_1.length; i++) {
        if (parseInt(booss1_1[i]) > 0) {
            return true;
        }
    }
    return false;
}

var UI = "UI/UIWindow.img/MobGage/Mob/"
function start() {
    선언();
    재설정();
    status = -1;
    action(1, 0, 0);
}

function action(mode, type, selection) {
    if (mode == 0 || mode == -1) {
        cm.sendOk("다음에 또 이용해주세요!");
        cm.dispose();
        return;
    }
    if (mode == 1) {
        status++;
    }
    if (status == 0) {
        var message = "#r#e[도감 : 수집 컨텐츠]#k#n\r\n";
        message += "#L1##b#i4000016#  [기타] 수집 #k#l\r\n\r\n";
        message += "#L3##b#i1032099# [장비] 수집 #k#l\r\n\r\n";
        //message += "#L4##b#i1322031#[재료] 컬렉션 III#k#l\r\n\r\n\r\n";
        message += "#L2##b#f" + UI + 2220000 + "#  [보스] 수집#k#l\r\n\r\n\r\n";
        message += "#b#e[도감 이전]#k#n\r\n";
        message += "#L999##b#i4031298# 내 캐릭터한테 이전하기#k#l\r\n\r\n\r\n";
		message += "#b#e[도감 올컬렉션]#k#n\r\n";
		message += "#L998##r#i1322031# 도감 100% 달성#l\r\n\r\n\r\n";	
        cm.sendSimple(message);
    } else if (status == 1) {
        selet = selection;
        if (selet == 999) {
            if (!enableTransfer()) {
                var talk = "이전 시킬 수집 데이터가 없습니다.\r\n";
                cm.sendOk(talk);
                cm.dispose();
                return;
            }

            users = getMyCharacters();
            if (users.length == 0) {
                var talk = "이전할 수 있는 캐릭터가 없습니다.\r\n";
                cm.sendOk(talk);
                cm.dispose();
                return;
            }

            var talk = "수집 데이터를 이전시키기 위해서는\r\n#b#t" + transferItem[0] + ":# ";
            talk += transferItem[1] + "개#k가 필요합니다.\r\n\r\n";
            talk += "이전하실 캐릭터를 선택해 주세요.\r\n\r\n";
            for (var i = 0; i < users.length; i++) {
                var userID = users[i][0];
                var userName = users[i][1];
                talk += "#b#L" + userID + "#" + userName + "#l#k\r\n";
            }
            cm.sendSimple(talk);
        } else if (selet == 998) {
			var talk = "도감 완성을 위해서는 #b#i" + perfectItem[0] + "##t" + perfectItem[0] + ":#";
            talk += "#r\r\n" + perfectItem[1] + "개#k가 필요합니다. 구매하시겠습니까?\r\n\r\n";
			cm.sendYesNo(talk);
		
		} else if (selet == 1) {
            var message = "#d#e#h ##n#k님의 #d수집 도감 I#k\r\n\r\n";
            message += "#d컬렉션 I#k 완성도 : #B" + 퍼센트().toFixed(2) + "# #b[" + 퍼센트().toFixed(2) + "%]#k\r\n";
            //message += "#L9999##b#e수집 I 100% 보상받기#n#k\r\n";
            for (var i = 0; i < books1_1.length; i++) {
                if (i % 3 == 0) {
                    message += "\r\n"
                }
                if (books1_1[i] == 0) {
                    message += "#L" + i + "##i" + books1[i][0] + "# #r[미등록]#k";
                } else {
                    message += "#L" + i + "##i" + books1[i][0] + "##e#b[등록됨]#n#k";
                }
            }
            cm.sendSimple(message);
        } else if (selet == 2) {
            var message = "#d#e#h ##n#k님의 #d보스 처치#k\r\n\r\n";
            message += "#d보스 컬렉션#k 완성도 : #B" + 보스퍼센트().toFixed(2) + "# #b[" + 보스퍼센트().toFixed(2) + "%]#k\r\n";
            //message += "#L9998##b#e보스 처치 100% 보상받기#n#k\r\n";
            for (var i = 0; i < booss1_1.length; i++) {
                if (i % 3 == 0) {
                    message += "\r\n\r\n"
                }
                if (booss1_1[i] == 0) {
                    message += "#L" + i + "##f" + UI + booss1[i][0] + "# #r[미등록]#k";
                } else {
                    message += "#L" + i + "##f" + UI + booss1[i][0] + "##e#b[등록됨]#n#k";
                }
            }
            cm.sendSimple(message);
        } else if (selet == 3) {
            var message = "#d#e#h ##n#k님의 #d컬렉션 II#k\r\n\r\n";
            message += "#d장비 수집 #k 완성도 : #B" + 퍼센트2().toFixed(2) + "# #b[" + 퍼센트2().toFixed(2) + "%]#k\r\n";
            //message += "#L9997##b#e컬렉션 II 100% 보상받기#n#k\r\n";
            for (var i = 0; i < books2_1.length; i++) {
                if (i % 3 == 0) {
                    message += "\r\n"
                }
                if (books2_1[i] == 0) {
                    message += "#L" + i + "##i" + books2[i][0] + "# #r[미등록]#k";
                } else {
                    message += "#L" + i + "##i" + books2[i][0] + "##e#b[등록됨]#n#k";
                }
            }
            cm.sendSimple(message);
        } else if (selet == 4) {
            var message = "#d#e#h ##n#k님의 #d컬렉션 III#k\r\n\r\n";
            message += "#d컬렉션 III#k 완성도 : #B" + 퍼센트3().toFixed(2) + "# #b[" + 퍼센트3().toFixed(2) + "%]#k\r\n";
            message += "#L9996##b#e컬렉션 III 100% 보상받기#n#k\r\n";
            for (var i = 0; i < books3_1.length; i++) {
                if (i % 3 == 0) {
                    message += "\r\n"
                }
                if (books3_1[i] == 0) {
                    message += "#L" + i + "##i" + books3[i][0] + "# #r[미등록]#k";
                } else {
                    message += "#L" + i + "##i" + books3[i][0] + "##e#b[등록됨]#n#k";
                }
            }
            cm.sendSimple(message);
        }
    } else if (status == 2) {
        sel = selection;
        if (selet == 999) {
            if (!cm.haveItem(transferItem[0], transferItem[1]) || cm.itemQuantity(transferItem[0]) < transferItem[1]) {
                var talk = "수집 데이터를 이전시키기 위해서는 #b#v" + transferItem[0] + "# #t" + transferItem[0] + ":# ";
                talk += transferItem[1] + "개#k가 필요합니다.\r\n";
                cm.sendOk(talk);
                cm.dispose();
                return;
            }

            var err = true;
            for (var i = 0; i < users.length; i++) {
                var userID = users[i][0];
                if (selection == userID) {
                    err = false;
                }
            }

            if (err) {
                var talk = "핵 쓰지마라 시발 !!\r\n";
                cm.sendOk(talk);
                cm.dispose();
                return;
            }

            cm.gainItem(transferItem[0], -transferItem[1]);
            transferMyData(selection);
            var talk = "이전이 완료 되었습니다.\r\n";
            cm.sendOk(talk);
            cm.dispose();
        } else if (selet == 998){
			 if (!cm.haveItem(perfectItem[0], perfectItem[1]) || cm.itemQuantity(perfectItem[0]) < perfectItem[1]) {
                var talk = "도감 완성을 위해서는 #b#v" + perfectItem[0] + "# #t" + perfectItem[0] + ":#\r\n";
                talk += "#r" + perfectItem[1] + "개#k가 필요합니다.\r\n";
                cm.sendOk(talk);
                cm.dispose();
                return;
            }

            cm.gainItem(perfectItem[0], -perfectItem[1]);
            perfectMyData();
            var talk = "도감 수집이 완성되었습니다.\r\n";
            cm.sendOk(talk);
            cm.dispose();
		
		} else if (sel < 9996) {
            if (selet == 1) {
                if (books1_1[sel] > 0) {
                    var mess = "이미 등록된 도감입니다.\r\n";
                    mess += "#b#e[증가 능력치]" + (books1[sel][2] > 0 ? "\r\n올스텟 + " + books1[sel][2] + "" : "") + "" + (books1[sel][3] > 0 ? "\r\n공격력 + " + books1[sel][3] + "" : "") + "" + (books1[sel][4] > 0 ? "\r\n마력 + " + books1[sel][4] + "" : "") + "#n#k\r\n\r\n";
                    cm.sendOk(mess);
                    cm.dispose();
                    return;
                } else {
                    var t = "";
                    t += "#r#i" + books1[sel][0] + "##z" + books1[sel][0] + "#의 #d컬렉션#k을 등록하려면 아래의 재료를 모아오세요\r\n";
                    t += "#r#i" + books1[sel][0] + "##z" + books1[sel][0] + "# " + cm.itemQuantity(books1[sel][0]) + " / " + books1[sel][1] + "개 " + (cm.itemQuantity(books1[sel][0]) >= books1[sel][1] ? "#e#b[등록가능]#k#n" : "#r#e[등록불가]#k#n") + "\r\n\r\n";
                    t += "#b#e[증가 능력치]" + (books1[sel][2] > 0 ? "\r\n올스텟 + " + books1[sel][2] + "" : "") + "" + (books1[sel][3] > 0 ? "\r\n공격력 + " + books1[sel][3] + "" : "") + "" + (books1[sel][4] > 0 ? "\r\n마력 + " + books1[sel][4] + "" : "") + "#n#k\r\n\r\n";
                    t += "#d컬렉션#k에 등록하시겠습니까??";
                    cm.sendYesNo(t);
                }
            } else if (selet == 2) {
                if (cm.getQuestRecord(booss1[sel][0]).getCustomData() == null) {
                    cm.getQuestRecord(booss1[sel][0]).setCustomData("0");
                }
                if (booss1_1[sel] > 0) {
                    var mess = "이미 등록된 도감입니다.\r\n";
                    mess += "#b#e[증가 능력치]" + (booss1[sel][2] > 0 ? "\r\n올스텟 + " + booss1[sel][2] + "" : "") + "" + (booss1[sel][3] > 0 ? "\r\n공격력 + " + booss1[sel][3] + "" : "") + "" + (booss1[sel][4] > 0 ? "\r\n마력 + " + booss1[sel][4] + "" : "") + "#n#k\r\n\r\n";
                    cm.sendOk(mess);
                    cm.dispose();
                    return;
                } else {
                    var t = "";
                    t += "#r#f" + UI + booss1[sel][0] + "##o" + booss1[sel][0] + "#의 #d컬렉션#k을 등록하려면 아래의 보스를 잡아주세요\r\n";
                    t += "#r#f" + UI + booss1[sel][0] + "##o" + booss1[sel][0] + "# " + cm.getQuestRecord(booss1[sel][0]).getCustomData() + " / " + booss1[sel][1] + "마리 " + (cm.getQuestRecord(booss1[sel][0]).getCustomData() >= booss1[sel][1] ? "#e#b[등록가능]#k#n" : "#r#e[등록불가]#k#n") + "\r\n\r\n";
                    t += "#b#e[증가 능력치]" + (booss1[sel][2] > 0 ? "\r\n올스텟 + " + booss1[sel][2] + "" : "") + "" + (booss1[sel][3] > 0 ? "\r\n공격력 + " + booss1[sel][3] + "" : "") + "" + (booss1[sel][4] > 0 ? "\r\n마력 + " + booss1[sel][4] + "" : "") + "#n#k\r\n\r\n";
                    t += "#d컬렉션#k에 등록하시겠습니까??";
                    cm.sendYesNo(t);
                }
            } else if (selet == 3) {
                if (books2_1[sel] > 0) {
                    var mess = "이미 등록된 도감입니다.\r\n";
                    mess += "#b#e[증가 능력치]" + (books2[sel][2] > 0 ? "\r\n올스텟 + " + books2[sel][2] + "" : "") + "" + (books2[sel][3] > 0 ? "\r\n공격력 + " + books2[sel][3] + "" : "") + "" + (books2[sel][4] > 0 ? "\r\n마력 + " + books2[sel][4] + "" : "") + "#n#k\r\n\r\n";
                    cm.sendOk(mess);
                    cm.dispose();
                    return;
                } else {
                    var t = "";
                    t += "#r#i" + books2[sel][0] + "##z" + books2[sel][0] + "#의 #d컬렉션#k을 등록하려면 아래의 재료를 모아오세요\r\n";
                    t += "#r#i" + books2[sel][0] + "##z" + books2[sel][0] + "# " + cm.itemQuantity(books2[sel][0]) + " / " + books2[sel][1] + "개 " + (cm.itemQuantity(books2[sel][0]) >= books2[sel][1] ? "#e#b[등록가능]#k#n" : "#r#e[등록불가]#k#n") + "\r\n\r\n";
                    t += "#b#e[증가 능력치]" + (books2[sel][2] > 0 ? "\r\n올스텟 + " + books2[sel][2] + "" : "") + "" + (books2[sel][3] > 0 ? "\r\n공격력 + " + books2[sel][3] + "" : "") + "" + (books2[sel][4] > 0 ? "\r\n마력 + " + books2[sel][4] + "" : "") + "#n#k\r\n\r\n";
                    t += "#d컬렉션#k에 등록하시겠습니까??";
                    cm.sendYesNo(t);
                }
            } else if (selet == 4) {
                if (books3_1[sel] > 0) {
                    var mess = "이미 등록된 도감입니다.\r\n";
                    mess += "#b#e[증가 능력치]" + (books3[sel][2] > 0 ? "\r\n올스텟 + " + books3[sel][2] + "" : "") + "" + (books3[sel][3] > 0 ? "\r\n공격력 + " + books3[sel][3] + "" : "") + "" + (books3[sel][4] > 0 ? "\r\n마력 + " + books3[sel][4] + "" : "") + "#n#k\r\n\r\n";
                    cm.sendOk(mess);
                    cm.dispose();
                    return;
                } else {
                    var t = "";
                    t += "#r#i" + books3[sel][0] + "##z" + books3[sel][0] + "#의 #d컬렉션#k을 등록하려면 아래의 재료를 모아오세요\r\n";
                    t += "#r#i" + books3[sel][0] + "##z" + books3[sel][0] + "# " + cm.itemQuantity(books3[sel][0]) + " / " + books3[sel][1] + "개 " + (cm.itemQuantity(books3[sel][0]) >= books3[sel][1] ? "#e#b[등록가능]#k#n" : "#r#e[등록불가]#k#n") + "\r\n\r\n";
                    t += "#b#e[증가 능력치]" + (books3[sel][2] > 0 ? "\r\n올스텟 + " + books3[sel][2] + "" : "") + "" + (books3[sel][3] > 0 ? "\r\n공격력 + " + books3[sel][3] + "" : "") + "" + (books3[sel][4] > 0 ? "\r\n마력 + " + books3[sel][4] + "" : "") + "#n#k\r\n\r\n";
                    t += "#d컬렉션#k에 등록하시겠습니까??";
                    cm.sendYesNo(t);
                }
            }
        } else if (sel == 9999) {
            checkker = true;
            for (var i = 0; i < books1_1.length; i++) {
                if (books1_1[i] == 0) {
                    checkker = false;
                }
            }
            if (checkker) {
                if (cm.getQuestRecord(221017).getCustomData() == "0") {
                    cm.getQuestRecord(221017).setCustomData("1");
                    cm.gainItem(1132152, 1);
                    cm.sendOk("컬렉션완성도 100%보상인 #b#i1132152:##z1132152##k 아이템이 지급되었습니다.");
                    cm.dispose();
                    return;
                } else {
                    cm.sendOk("#r이미 컬렉션 완성도 100%보상을 받으셨습니다.#k");
                    cm.dispose();
                    return;
                }
            } else {
                cm.sendOk("#r컬렉션 완성도가 100%가 아닙니다. 컬렉션 완성도를 100% 채워주세요!#k");
                cm.dispose();
                return;
            }
        } else if (sel == 9998) {
            checkker = true;
            for (var i = 0; i < booss1_1.length; i++) {
                if (booss1_1[i] == 0) {
                    checkker = false;
                }
            }
            if (checkker) {
                if (cm.getQuestRecord(221018).getCustomData() == "0") {
                    cm.getQuestRecord(221018).setCustomData("1");
                    //cm.gainItem(1133000, 1);
                    cm.sendOk("컬렉션완성도 100%보상이 지급되었습니다.\r\n#b#e[능력치]\r\n공격력 + 8\r\n마력 + 16\r\n경험치 + 6%#n#k");
                    cm.dispose();
                    return;
                } else {
                    cm.sendOk("#r이미 컬렉션 완성도 100%보상을 받으셨습니다.#k\r\n#b#e[능력치]\r\n공격력 + 8\r\n마력 + 16\r\n경험치 + 6%#n#k");
                    cm.dispose();
                    return;
                }
            } else {
                cm.sendOk("#r컬렉션 완성도가 100%가 아닙니다. 컬렉션 완성도를 100% 채워주세요!#k");
                cm.dispose();
                return;
            }
        } else if (sel == 9997) {
            checkker = true;
            for (var i = 0; i < books2_1.length; i++) {
                if (books2_1[i] == 0) {
                    checkker = false;
                }
            }
            if (checkker) {
                if (cm.getQuestRecord(221019).getCustomData() == "0") {
                    cm.getQuestRecord(221019).setCustomData("1");
                    cm.gainItem(1133000, 1);
                    cm.sendOk("컬렉션완성도 100%보상이 지급되었습니다.\r\n컬렉션완성도 100%보상인 #b#i1133000:##z1133000##k 아이템이 지급되었습니다.\r\n#b#e[능력치]\r\n공격력 + 5\r\n마력 + 10\r\n메소 + 3%#n#k");
                    cm.dispose();
                    return;
                } else {
                    cm.sendOk("#r이미 컬렉션 완성도 100%보상을 받으셨습니다.#k\r\n#b#e[능력치]\r\n공격력 + 8\r\n마력 + 16\r\n메소 + 6%#n#k");
                    cm.dispose();
                    return;
                }
            } else {
                cm.sendOk("#r컬렉션 완성도가 100%가 아닙니다. 컬렉션 완성도를 100% 채워주세요!#k");
                cm.dispose();
                return;
            }
        } else if (sel == 9996) { //컬렉션III 보상
            checkker = true;
            for (var i = 0; i < books3_1.length; i++) {
                if (books3_1[i] == 0) {
                    checkker = false;
                }
            }
            if (checkker) {
                if (cm.getQuestRecord(221020).getCustomData() == "0") {
                    cm.getQuestRecord(221020).setCustomData("1");
                    cm.gainItem(1122156, 1);
                    cm.sendOk("컬렉션완성도 100%보상이 지급되었습니다.\r\n컬렉션완성도 100%보상인 #b#i1122156:##z1122156##k 아이템이 지급되었습니다.\r\n#b#e[능력치]\r\n공격력 + 30\r\n마력 + 60");
                    cm.dispose();
                    return;
                } else {
                    cm.sendOk("#r이미 컬렉션 완성도 100%보상을 받으셨습니다.#k\r\n#b#e[능력치]\r\n공격력 + 30\r\n마력 + 60");
                    cm.dispose();
                    return;
                }
            } else {
                cm.sendOk("#r컬렉션 완성도가 100%가 아닙니다. 컬렉션 완성도를 100% 채워주세요!#k");
                cm.dispose();
                return;
            }
        }
    } else if (status == 3) {
        if (selet == 1) {
            if (cm.haveItem(books1[sel][0], books1[sel][1])) {
                cm.gainItem(books1[sel][0], -books1[sel][1]);
                var cucu = "";
                for (var i = 0; i < books1_1.length; i++) {
                    if (i == sel) {
                        //cucu += "1,";
                        cucu += books1[sel][2] + ",";
                    } else {
                        cucu += "" + books1_1[i] + ",";
                    }
                }
                cm.getPlayer().setKeyValue("books1", cucu, true);//랜덤아이템 + 갯수 저장
                var text = "#b#i" + books1[sel][0] + "##z" + books1[sel][0] + "# #d컬렉션#k이 정상 등록되었습니다.#k\r\n\r\n";
                text += "#b#e[증가 능력치]" + (books1[sel][2] > 0 ? "\r\n올스텟 + " + books1[sel][2] + "" : "") + "" + (books1[sel][3] > 0 ? "\r\n공격력 + " + books1[sel][3] + "" : "") + "" + (books1[sel][4] > 0 ? "\r\n마력 + " + books1[sel][4] + "" : "") + "#n#k";
                cm.sendOk(text);
                cm.dispose();
                return;
                //            status = -1;
            } else {
                cm.sendOk("#r#i" + books1[sel][0] + "##z" + books1[sel][0] + "# #d컬렉션#k에 등록할 재료가 부족합니다.#k");
                cm.dispose();
                return;
            }
        } else if (selet == 2) {
            if (cm.getQuestRecord(booss1[sel][0]).getCustomData() >= booss1[sel][1]) {
                var cucu = "";
                for (var i = 0; i < booss1_1.length; i++) {
                    if (i == sel) {
                        // cucu += "1,";
                        cucu += booss1[sel][2] + ",";
                    } else {
                        cucu += "" + booss1_1[i] + ",";
                    }
                }
                cm.getPlayer().setKeyValue("booss1", cucu, true);//랜덤아이템 + 갯수 저장
                var text = "#b#f" + UI + booss1[sel][0] + "##o" + booss1[sel][0] + "# #d컬렉션#k이 정상 등록되었습니다.#k\r\n\r\n";
                text += "#b#e[증가 능력치]" + (booss1[sel][2] > 0 ? "\r\n올스텟 + " + booss1[sel][2] + "" : "") + "" + (booss1[sel][3] > 0 ? "\r\n공격력 + " + booss1[sel][3] + "" : "") + "" + (booss1[sel][4] > 0 ? "\r\n마력 + " + booss1[sel][4] + "" : "") + "#n#k";
                cm.sendOk(text);
                cm.dispose();
                return;
                //            status = -1;
            } else {
                cm.sendOk("#r#f" + UI + booss1[sel][0] + "##o" + booss1[sel][0] + "# #d컬렉션#k에 등록할 몹처치수가 부족합니다.#k");
                cm.dispose();
                return;
            }
        } else if (selet == 3) {
            if (cm.haveItem(books2[sel][0], books2[sel][1])) {
                cm.gainItem(books2[sel][0], -books2[sel][1]);
                var cucu = "";
                for (var i = 0; i < books2_1.length; i++) {
                    if (i == sel) {
                        // cucu += "1,";
                        cucu += books2[sel][2] + ",";
                    } else {
                        cucu += "" + books2_1[i] + ",";
                    }
                }
                cm.getPlayer().setKeyValue("books2", cucu, true);//랜덤아이템 + 갯수 저장
                var text = "#b#i" + books2[sel][0] + "##z" + books2[sel][0] + "# #d컬렉션#k이 정상 등록되었습니다.#k\r\n\r\n";
                text += "#b#e[증가 능력치]" + (books2[sel][2] > 0 ? "\r\n올스텟 + " + books2[sel][2] + "" : "") + "" + (books2[sel][3] > 0 ? "\r\n공격력 + " + books2[sel][3] + "" : "") + "" + (books2[sel][4] > 0 ? "\r\n마력 + " + books2[sel][4] + "" : "") + "#n#k";
                cm.sendOk(text);
                cm.dispose();
                return;
                //            status = -1;
            } else {
                cm.sendOk("#r#i" + books2[sel][0] + "##z" + books2[sel][0] + "# #d컬렉션#k에 등록할 재료가 부족합니다.#k");
                cm.dispose();
                return;
            }
        } else if (selet == 4) {
            if (cm.haveItem(books3[sel][0], books3[sel][1])) {
                cm.gainItem(books3[sel][0], -books3[sel][1]);
                var cucu = "";
                for (var i = 0; i < books3_1.length; i++) {
                    if (i == sel) {
                        // cucu += "1,";
                        cucu += books3[sel][2] + ",";
                    } else {
                        cucu += "" + books3_1[i] + ",";
                    }
                }
                cm.getPlayer().setKeyValue("books3", cucu, true);//랜덤아이템 + 갯수 저장
                var text = "#b#i" + books3[sel][0] + "##z" + books3[sel][0] + "# #d컬렉션#k이 정상 등록되었습니다.#k\r\n\r\n";
                text += "#b#e[증가 능력치]" + (books3[sel][2] > 0 ? "\r\n올스텟 + " + books3[sel][2] + "" : "") + "" + (books3[sel][3] > 0 ? "\r\n공격력 + " + books3[sel][3] + "" : "") + "" + (books3[sel][4] > 0 ? "\r\n마력 + " + books3[sel][4] + "" : "") + "#n#k";
                cm.sendOk(text);
                cm.dispose();
                return;
                //            status = -1;
            } else {
                cm.sendOk("#r#i" + books3[sel][0] + "##z" + books3[sel][0] + "# #d컬렉션#k에 등록할 재료가 부족합니다.#k");
                cm.dispose();
                return;
            }
        }
    }
}

function 재설정() {
    var reload = false;
    books1_1 = cm.getPlayer().getKeyValue("books1").split(",");
    for (var i = 0; i < books1.length; i++) {
        var val = books1[i][2];
        var queryVal = parseInt(books1_1[i]);
        if (queryVal > 0 && val != queryVal) {
            books1_1[i] = val;
            reload = true;
        }
    }
    books2_1 = cm.getPlayer().getKeyValue("books2").split(",");
    for (var i = 0; i < books2.length; i++) {
        var val = books2[i][2];
        var queryVal = parseInt(books2_1[i]);
        if (queryVal > 0 && val != queryVal) {
            books2_1[i] = val;
            reload = true;
        }
    }
    books3_1 = cm.getPlayer().getKeyValue("books3").split(",");
    for (var i = 0; i < books3.length; i++) {
        var val = books3[i][2];
        var queryVal = parseInt(books3_1[i]);
        if (queryVal > 0 && val != queryVal) {
            books3_1[i] = val;
            reload = true;
        }
    }
    booss1_1 = cm.getPlayer().getKeyValue("booss1").split(",");
    for (var i = 0; i < booss1.length; i++) {
        var val = booss1[i][2];
        var queryVal = parseInt(booss1_1[i]);
        if (queryVal > 0 && val != queryVal) {
            booss1_1[i] = val;
            reload = true;
        }
    }

    var newVal = String();
    for (var i = 0; i < books1_1.length; i++) {
        newVal += books1_1[i] + ",";
    }
    cm.getPlayer().setKeyValue("books1", newVal, true);

    var newVal = String();
    for (var i = 0; i < books2_1.length; i++) {
        newVal += books2_1[i] + ",";
    }
    cm.getPlayer().setKeyValue("books2", newVal, true);

    var newVal = String();
    for (var i = 0; i < books3_1.length; i++) {
        newVal += books3_1[i] + ",";
    }
    cm.getPlayer().setKeyValue("books3", newVal, true);

    var newVal = String();
    for (var i = 0; i < booss1_1.length; i++) {
        newVal += booss1_1[i] + ",";
    }
    cm.getPlayer().setKeyValue("booss1", newVal, true);

    if (reload) {
        cm.getPlayer().customizeStat(0);
        cm.getPlayer().saveToDB(false, false); //바뀐 값을 저장함.
    }
}

function 선언() {
    if (cm.getQuestRecord(221017).getCustomData() == null) {
        cm.getQuestRecord(221017).setCustomData("0");
    }
    if (cm.getPlayer().getKeyValue("books1") == null) {
        var bookcheck1 = ""
        for (var i = 0; i < books1.length; i++) {
            bookcheck1 += "0,";
        }
        cm.getPlayer().setKeyValue("books1", bookcheck1, true);//랜덤아이템 + 갯수 저장
        //cm.getPlayer().dropMessage(5, "[출력] " + bookcheck1);
    }
    if (cm.getPlayer().getKeyValue("books1") != null) {
        books1_1 = cm.getPlayer().getKeyValue("books1").split(",");
    } else {
        cm.getPlayer().dropMessage(5, "null 오류 발생 ");
    }
    
    if (books1.length != books1_1.length) {
        var bookcheck2 = "";
        for (var i = 0; i < (books1.length - books1_1.length); i++) {
            bookcheck2 += "0,";
        }

        cm.getPlayer().setKeyValue("books1", cm.getPlayer().getKeyValue("books1") + bookcheck2, true);//랜덤아이템 + 갯수 저장
    }
    books1_1 = cm.getPlayer().getKeyValue("books1").split(",");
    //--------------------------------------------------------- 재료2 컬렉션
    if (cm.getQuestRecord(221019).getCustomData() == null) {
        cm.getQuestRecord(221019).setCustomData("0");
    }
    if (cm.getPlayer().getKeyValue("books2") == null) {
        var bookcheck1 = ""
        for (var i = 0; i < books2.length; i++) {
            bookcheck1 += "0,";
        }
        cm.getPlayer().setKeyValue("books2", bookcheck1, true);//랜덤아이템 + 갯수 저장
    }
    books2_1 = cm.getPlayer().getKeyValue("books2").split(",");
    if (books2.length != books2_1.length) {
        var bookcheck2 = "";
        for (var i = 0; i < (books2.length - books2_1.length); i++) {
            bookcheck2 += "0,";
        }

        cm.getPlayer().setKeyValue("books2", cm.getPlayer().getKeyValue("books2") + bookcheck2, true);//랜덤아이템 + 갯수 저장
    }
    books2_1 = cm.getPlayer().getKeyValue("books2").split(",");
    //--------------------------------------------------------- 재료3 컬렉션
    if (cm.getQuestRecord(221020).getCustomData() == null) {
        cm.getQuestRecord(221020).setCustomData("0");
    }
    if (cm.getPlayer().getKeyValue("books3") == null) {
        var bookcheck1 = ""
        for (var i = 0; i < books3.length; i++) {
            bookcheck1 += "0,";
        }
        cm.getPlayer().setKeyValue("books3", bookcheck1, true);//랜덤아이템 + 갯수 저장
    }
    books3_1 = cm.getPlayer().getKeyValue("books3").split(",");
    if (books3.length != books3_1.length) {
        var bookcheck2 = "";
        for (var i = 0; i < (books3.length - books3_1.length); i++) {
            bookcheck2 += "0,";
        }

        cm.getPlayer().setKeyValue("books3", cm.getPlayer().getKeyValue("books3") + bookcheck2, true);//랜덤아이템 + 갯수 저장
    }
    books3_1 = cm.getPlayer().getKeyValue("books3").split(",");
    //--------------------------------------------------------- 보스컬렉션
    if (cm.getQuestRecord(221018).getCustomData() == null) {
        cm.getQuestRecord(221018).setCustomData("0");
    }
    if (cm.getPlayer().getKeyValue("booss1") == null) {
        var bookcheck1 = ""
        for (var i = 0; i < booss1.length; i++) {
            bookcheck1 += "0,";
        }
        cm.getPlayer().setKeyValue("booss1", bookcheck1, true);//랜덤아이템 + 갯수 저장
    }
    booss1_1 = cm.getPlayer().getKeyValue("booss1").split(",");
    if (booss1.length != booss1_1.length) {
        var bookcheck2 = "";
        for (var i = 0; i < (booss1.length - booss1_1.length); i++) {
            bookcheck2 += "0,";
        }

        cm.getPlayer().setKeyValue("booss1", cm.getPlayer().getKeyValue("booss1") + bookcheck2, true);//랜덤아이템 + 갯수 저장
    }
    booss1_1 = cm.getPlayer().getKeyValue("booss1").split(",");
}

function 퍼센트() {
    var a = 0;
    var b = 0;
    for (var i = 0; i < books1.length; i++) {
        a++
    }
    for (var i = 0; i < books1_1.length; i++) {
        if (books1_1[i] > 0) {
            b++
        }
    }
    return b / a * 100.0;

}
function 퍼센트2() {
    var a = 0;
    var b = 0;
    for (var i = 0; i < books2.length; i++) {
        a++
    }
    for (var i = 0; i < books2_1.length; i++) {
        if (books2_1[i] > 0) {
            b++
        }
    }
    return b / a * 100.0;

}
function 퍼센트3() {
    var a = 0;
    var b = 0;
    for (var i = 0; i < books3.length; i++) {
        a++
    }
    for (var i = 0; i < books3_1.length; i++) {
        if (books3_1[i] > 0) {
            b++
        }
    }
    return b / a * 100.0;

}
function 보스퍼센트() {
    var a = 0;
    var b = 0;
    for (var i = 0; i < booss1.length; i++) {
        a++
    }
    for (var i = 0; i < booss1_1.length; i++) {
        if (booss1_1[i] > 0) {
            b++
        }
    }
    return b / a * 100.0;

}
